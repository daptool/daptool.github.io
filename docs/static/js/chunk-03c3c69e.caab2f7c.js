(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03c3c69e"],{"0de5":function(t,e,r){"use strict";r("a9e3"),r("d81d"),r("fb6a"),r("96a9");var n=r("24b2"),s=r("f977"),a=r("80d2");e["a"]=n["a"].extend({name:"v-virtual-scroll",directives:{Scroll:s["b"]},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:function(){return[]}}},data:function(){return{first:0,last:0,scrollTop:0}},computed:{__bench:function(){return parseInt(this.bench,10)},__itemHeight:function(){return parseInt(this.itemHeight,10)},firstToRender:function(){return Math.max(0,this.first-this.__bench)},lastToRender:function(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted:function(){this.last=this.getLast(0)},methods:{getChildren:function(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild:function(t,e){e+=this.firstToRender;var r=Object(a["h"])(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:r},key:e},Object(a["s"])(this,"default",{index:e,item:t}))},getFirst:function(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast:function(t){var e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll:function(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render:function(t){var e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:Object(a["h"])(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}})},"27db":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.progressDlg?r("generic-dlg",{attrs:{show:t.progressDlg,persistent:""}},[r("v-card",[r("v-card-title"),r("v-card-subtitle",[r("p",[t._v(t._s(t.dialogMessage))]),r("p",[t._v("This may take a few minutes.")]),r("p",[r("strong",[t._v("Do not close or refresh this page while deploying!")])])]),r("v-card-text",[r("v-progress-circular",{attrs:{size:70,width:7,color:"primary",indeterminate:""}})],1)],1)],1):t._e(),t.successDlg?r("generic-dlg",{attrs:{show:t.successDlg},on:{done:function(e){t.successDlg=!1}}},[r("v-card",[r("v-card-title",[r("span",[t._v("Success")]),r("v-icon",{staticClass:"pl-2",attrs:{color:"primary"}},[t._v("mdi-check-circle")])],1),r("v-card-subtitle",{attrs:{align:"left"}},[t._v("Contract deployed")]),r("v-card-text",[r("p",[t._v("Your contract has been deployed at "),r("a",{attrs:{href:this.chainExplorerURL+"address/"+this.contractAddress,target:"_blank"}},[t._v(t._s(this.contractAddress))])]),r("p",[t._v("Note that it might take 30 - 90 sceonds for the block to propagate befor it's visible in chain explorer.")])]),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{attrs:{color:"primary",text:"",rounded:""},on:{click:function(e){return t.$router.push({name:"Manager",query:{address:t.contractAddress}})}}},[t._v("View in manager")]),r("v-btn",{attrs:{color:"error",text:"",rounded:""},on:{click:function(e){t.successDlg=!1}}},[t._v("Close")])],1)],1)],1):t._e(),r("v-container",[r("v-row",{staticClass:"justify-center"},[r("deploy-form",{ref:"dForm",staticClass:"ml-1 mb-1",attrs:{descriptions:t.filteredDescriptions,contract:t.contract,deployDlg:t.progressDlg},on:{contractSelected:t.setContract,formSubmitted:t.deploy}})],1)],1)],1)},s=[],a=r("1da1"),c=r("5530"),i=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("4de4"),r("b0c0"),r("d81d"),r("a4d3"),r("e01a"),r("9861"),r("fb6a"),r("2b3d"),r("ac1f"),r("841c"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[t.contract?r("v-card-title",[t._v(t._s(t.contract.description.name))]):r("v-card-title",[t._v("Contract")]),r("v-card-subtitle",{staticClass:"description",attrs:{align:"left"}},[t.contract?r("p",[t._v("Type: "+t._s(t.contract.description.type))]):r("p",[t._v("Type: Unknown")]),t.contract?r("p",[t._v(t._s(t.contract.description.description))]):r("p",[t._v("Please select contract to deploy.")])]),r("div",{staticClass:"description-border"}),r("v-card-text",[r("v-container",[r("v-row",{staticClass:"left-list"},[r("v-col",{staticClass:"list-border",attrs:{sm:"3",xs:"12"}},[r("contract-list",{attrs:{descriptions:t.descriptions,contract:t.contract},on:{contractSelected:t.setContract}})],1),r("v-col",{attrs:{sm:"9",xs:"12"}},[r("v-row",[r("v-col",[t.inputs.length?r("abi-form",{ref:"gForm",attrs:{inputs:t.inputs}}):t._e()],1)],1),r("v-row",[r("v-col",{staticClass:"form-buttons"},[r("v-btn",{staticClass:"mr-4 mt-4",attrs:{disabled:!t.wallet||!t.contract,color:"primary"},on:{click:t.deploy}},[t.deployDlg?r("v-progress-linear",{attrs:{indeterminate:"",rounded:"",height:"7",color:"warning"}}):r("span",[t._v("Deploy")])],1),r("v-btn",{staticClass:"mr-4 mt-4",attrs:{color:"error"},on:{click:t.reset}},[t._v("Reset")])],1)],1)],1)],1)],1)],1)],1)}),o=[],l=r("2909"),u=(r("38cf"),r("2ca0"),r("8a79"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-subheader",[t._v("Contracts")]),r("v-virtual-scroll",{staticClass:"full-list hidden-xs-only",attrs:{items:t.descriptions,bench:5,"item-height":50,height:"inherit","min-height":"300","max-height":"600"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[r("v-list-item",{key:n.name,on:{click:function(e){return t.selected(n.name)}}},[r("v-list-item-content",{class:n.name==t.contractName?"active":""},[t._v(t._s(n.name))])],1)]}}])}),r("div",{staticClass:"compact-list hidden-sm-and-up"},[r("v-tooltip",{attrs:{color:"info",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[r("div",t._g(t._b({},"div",s,!1),n),[r("v-select",{attrs:{items:t.descriptions,"item-text":"name","item-value":"name",label:"Contract","single-line":"",dense:""},model:{value:t.selectedContract,callback:function(e){t.selectedContract=e},expression:"selectedContract"}})],1)]}}])},[r("span",[t._v("Select contract")])])],1)],1)}),d=[],p={name:"ContractList",props:{descriptions:Array,contract:Object},data:function(){return{selectedContract:""}},computed:{contractName:function(){return this.contract?this.contract.description.name:""}},watch:{selectedContract:function(t){this.selectedContract=t,this.selected(t)}},methods:{selected:function(t){this.selectedContract=t,this.$emit("contractSelected",t)}}},f=p,h=(r("f63b"),r("2877")),m=r("6544"),g=r.n(m),v=r("da13"),b=r("5d23"),y=r("b974"),w=r("e0c7"),C=r("3a2f"),x=r("0de5"),_=Object(h["a"])(f,u,d,!1,null,"261a040f",null),k=_.exports;g()(_,{VListItem:v["a"],VListItemContent:b["a"],VSelect:y["a"],VSubheader:w["a"],VTooltip:C["a"],VVirtualScroll:x["a"]});var D=r("2f62"),A=function(){return r.e("chunk-3e3ec137").then(r.bind(null,"bfb8"))},V={name:"DeployForm",components:{"abi-form":A,"contract-list":k},props:{descriptions:Array,contract:Object,deployDlg:Boolean},data:function(){return{inputs:[]}},computed:Object(c["a"])({},Object(D["d"])({wallet:function(t){return t.chain.wallet},w3:function(t){return t.chain.w3}})),watch:{contract:function(t){var e,r=t.raw.abi.filter((function(t){return"constructor"===t.type}))[0],n=[];r&&(n=r.inputs),this.inputs=[],this.inputs.push({name:"localName",type:"String"}),(e=this.inputs).push.apply(e,Object(l["a"])(n))}},methods:Object(c["a"])(Object(c["a"])({},Object(D["b"])({displayAlert:"alert/displayAlert"})),{},{reset:function(){this.$refs.gForm.reset()},deploy:function(){var t=this;if(this.$refs.gForm.validate()){var e=this.$refs.gForm.form.filter((function(t){return"totalSupply_"===t.name}))[0],r=this.$refs.gForm.form.filter((function(t){return"decimals_"===t.name}))[0];e&&r&&(e.value+="0".repeat(r.value)),this.$refs.gForm.form.map((function(e){if(e.type.startsWith("bytes"))if(e.type.endsWith("[]")){var r=[];e.value.map((function(e){r.push(t.w3.utils.utf8ToHex(e))})),e.value=r}else e.vlaue=t.w3.utils.utf8ToHex(e.value)})),this.$emit("formSubmitted",this.$refs.gForm.form)}},setContract:function(t){this.$emit("contractSelected",t)}})},j=V,O=(r("81d4"),r("8336")),R=r("b0af"),S=r("99d9"),T=r("62ad"),$=r("a523"),U=r("8e36"),E=r("0fd9"),L=Object(h["a"])(j,i,o,!1,null,"19a1367a",null),F=L.exports;g()(L,{VBtn:O["a"],VCard:R["a"],VCardSubtitle:S["b"],VCardText:S["c"],VCardTitle:S["d"],VCol:T["a"],VContainer:$["a"],VProgressLinear:U["a"],VRow:E["a"]});var P=r("e71f"),H=r("5609"),I=function(){return r.e("chunk-05765377").then(r.bind(null,"0c46"))},M={name:"Deploy",components:{"deploy-form":F,"generic-dlg":I},data:function(){return{contract:null,formData:null,chains:[],progressDlg:!1,dialogMessage:"",successDlg:!1,contractAddress:"",chainExplorerURL:""}},computed:Object(c["a"])(Object(c["a"])({},Object(D["d"])({w3:function(t){return t.chain.w3},wallet:function(t){return t.chain.wallet},currentChain:function(t){return t.chain.currentChain},db:function(t){return t.db.db},descriptions:function(t){return t.db.descriptions}})),{},{filteredDescriptions:function(){var t=this;return this.descriptions?this.descriptions.filter((function(e){return e.type==t.$route.params.type})):[]}}),mounted:function(){this.chains=H["a"]},methods:Object(c["a"])(Object(c["a"])({},Object(D["b"])({addUserContract:"db/addUserContract",displayAlert:"alert/displayAlert"})),{},{setContract:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getContract(t);case 2:n=r.sent,s=e.descriptions.filter((function(e){return e.name==t}))[0],e.contract={raw:n,description:s};case 5:case"end":return r.stop()}}),r)})))()},getContract:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(P["c"])(Object(P["b"])(e.db,"code",t));case 3:return n=r.sent,r.next=6,Object(P["c"])(Object(P["b"])(e.db,"abi",t));case 6:if(s=r.sent,!n.exists()||!s.exists()){r.next=11;break}return r.abrupt("return",{bytecode:n.data().bytecode,source:n.data().source,compilerVersion:n.data().compilerVersion,evmVersion:n.data().evmVersion,abi:s.data().abi});case 11:e.displayAlert({message:"Error fetching compiled contract",type:"error"});case 12:r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](0),e.displayAlert({message:r.t0.code,type:"error"});case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()},deploy:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s,c,i,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.formData=t;try{e.progressDlg=!0,e.dialogMessage="Deploying contract...",n=new e.w3.eth.Contract(e.contract.raw.abi),s=e.contract.raw.abi.filter((function(t){return"constructor"===t.type}))[0],c=[],s&&(c=s.inputs),i=[],o=[],c.map((function(t){o.push(e.formData.filter((function(e){return e.name===t.name}))[0].value)})),c.map((function(t){i.push(t.type)})),e.contract.raw["encodedConstructorArguments"]=e.w3.eth.abi.encodeParameters(i,o),l={data:e.contract.raw.bytecode,arguments:o},n.deploy(l).send({from:e.wallet}).on("transactionHash",function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,e.w3.eth.getTransactionReceipt(r);case 3:if(n=t.sent,!n||!n.contractAddress){t.next=12;break}return e.contractAddress=n.contractAddress,e.contractAddress=e.contractAddress.toLowerCase(),s={wallet:e.wallet,address:e.contractAddress,name:e.formData.filter((function(t){return"localName"===t.name}))[0].value,abi:e.contract.description.name,chain:e.currentChain,constructorArguements:e.contract.raw.encodedConstructorArguments,verified:!1},e.addUserContract(s),e.verifyOnBlockExplorer(s),e.$refs.dForm.reset(),t.abrupt("break",17);case 12:return e.dialogMessage="Waiting for a mined block to include your contract...",t.next=15,e.sleep(2e3);case 15:t.next=0;break;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.progressDlg=!1,e.displayAlert({message:t.message,type:"error"})}))}catch(u){e.progressDlg=!1,e.displayAlert({message:u.message,type:"error"})}case 2:case"end":return r.stop()}}),r)})))()},sleep:function(t){return new Promise((function(e){return setTimeout(e,t)}))},verifyOnBlockExplorer:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.dialogMessage="Verifying contract...",r.next=3,e.sleep(3e4);case 3:n=e.chains.filter((function(e){return e.id===t.chain}))[0];case 4:if(n){r.next=9;break}return r.next=7,e.sleep(100);case 7:r.next=4;break;case 9:e.chainExplorerURL=n.blockExplorerUrls[0],fetch(n.blockExplorerAPIUrls[0],{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({apikey:n.blockExplorerAPIKey,contractaddress:e.contractAddress,contractname:t.abi,optimizationUsed:1,runs:200,licenseType:3,module:"contract",action:"verifysourcecode",codeformat:"solidity-single-file",sourceCode:e.contract.raw.source,compilerversion:"v"+e.contract.raw.compilerVersion,evmversion:e.contract.raw.evmVersion,constructorArguements:e.contract.raw.encodedConstructorArguments.slice(2)})}).then((function(t){return t.json()})).then(function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(s){var a,c,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("1"!=s.status){r.next=38;break}a=new URL(n.blockExplorerAPIUrls[0]),a.search=new URLSearchParams({apikey:n.blockExplorerAPIKey,guid:s.result,module:"contract",action:"checkverifystatus"}),c=!1;case 4:if(c){r.next=36;break}return r.prev=5,r.next=8,fetch(a);case 8:return i=r.sent,r.next=11,i.json();case 11:if(o=r.sent,"1"!=o.status){r.next=20;break}e.progressDlg=!1,e.successDlg=!0,c=!0,t.verified=!0,e.addUserContract(t),r.next=26;break;case 20:if("Pending in queue"!==o.result){r.next=25;break}return r.next=23,e.sleep(3e4);case 23:r.next=26;break;case 25:"Already Verified"===o.result?(e.progressDlg=!1,e.successDlg=!0,c=!0,t.verified=!0,e.addUserContract(t)):(e.progressDlg=!1,e.successDlg=!0,c=!0,e.displayAlert({message:"Contract deployed but not verified. Reason: "+o.result,type:"error"}));case 26:r.next=34;break;case 28:r.prev=28,r.t0=r["catch"](5),e.progressDlg=!1,e.successDlg=!0,c=!0,e.displayAlert({message:"Contract deployed but not verified. Reason: "+r.t0.message,type:"error"});case 34:r.next=4;break;case 36:r.next=41;break;case 38:e.progressDlg=!1,e.successDlg=!0,e.displayAlert({message:s.result,type:"error"});case 41:case"end":return r.stop()}}),r,null,[[5,28]])})));return function(t){return r.apply(this,arguments)}}()).catch((function(t){e.progressDlg=!1,e.successDlg=!0,e.displayAlert({message:t.message,type:"error"})}));case 11:case"end":return r.stop()}}),r)})))()}})},N=M,B=(r("d089"),r("132d")),q=r("490a"),W=Object(h["a"])(N,n,s,!1,null,"6da42acd",null);e["default"]=W.exports;g()(W,{VBtn:O["a"],VCard:R["a"],VCardActions:S["a"],VCardSubtitle:S["b"],VCardText:S["c"],VCardTitle:S["d"],VContainer:$["a"],VIcon:B["a"],VProgressCircular:q["a"],VRow:E["a"]})},"81d4":function(t,e,r){"use strict";r("9dad")},"96a9":function(t,e,r){},"9dad":function(t,e,r){},b89d:function(t,e,r){},d089:function(t,e,r){"use strict";r("b89d")},f63b:function(t,e,r){"use strict";r("fda66")},fda66:function(t,e,r){}}]);
//# sourceMappingURL=chunk-03c3c69e.caab2f7c.js.map